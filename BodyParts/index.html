<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sort the Body Parts</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .game-container {
            max-width: 1000px;
            width: 100%;
            text-align: center;
        }
        
        h1 {
            color: white;
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 3px 3px 0 #ff9966;
        }
        
        .subtitle {
            font-size: 1.5rem;
            color: #ffffcc;
            margin-bottom: 20px;
        }
        
        .game-area {
            background: white;
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 20px;
            border: 8px solid #ff9966;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .instruction-box {
            background: #ffebee;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 4px solid #ff6b6b;
            font-size: 1.5rem;
            color: #d32f2f;
            font-weight: bold;
        }
        
        .systems-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .system-box {
            background: #e3f2fd;
            border-radius: 20px;
            padding: 20px;
            border: 5px solid;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .system-title {
            font-size: 1.8rem;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 15px;
            width: 100%;
            text-shadow: 2px 2px 0 #000;
        }
        
        .system-body-parts {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            min-height: 120px;
            width: 100%;
        }
        
        .body-parts-container {
            background: #f1f8e9;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border: 5px solid #8bc34a;
        }
        
        .parts-title {
            font-size: 1.8rem;
            color: #388e3c;
            margin-bottom: 20px;
        }
        
        .parts-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            min-height: 120px;
        }
        
        .body-part {
            background: linear-gradient(145deg, #ffffff, #e0e0e0);
            border-radius: 15px;
            padding: 15px 20px;
            cursor: grab;
            font-size: 1.4rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 4px solid transparent;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        
        .body-part:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0,0,0,0.2);
        }
        
        .body-part.dragging {
            opacity: 0.7;
            transform: scale(0.95);
        }
        
        .body-part.correct {
            border-color: #4caf50 !important;
            background: linear-gradient(145deg, #c8e6c9, #a5d6a7);
        }
        
        .body-part.incorrect {
            border-color: #f44336 !important;
            background: linear-gradient(145deg, #ffcdd2, #ef9a9a);
            animation: shake 0.5s;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            background: #fff3e0;
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 25px;
            border: 5px solid #ffb74d;
        }
        
        .stat-box {
            text-align: center;
        }
        
        .stat-value {
            font-size: 3rem;
            color: #ff6b6b;
            font-weight: bold;
        }
        
        .stat-label {
            color: #ff8a65;
            font-size: 1.2rem;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 25px;
        }
        
        button {
            background: linear-gradient(to right, #4ecdc4, #26a69a);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 8px 15px rgba(78, 205, 196, 0.3);
            border: 5px solid white;
        }
        
        button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 20px rgba(78, 205, 196, 0.4);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.5s;
        }
        
        .celebration-content {
            text-align: center;
            background: linear-gradient(135deg, #ff9966, #ff6b6b);
            padding: 50px;
            border-radius: 30px;
            border: 10px solid #4ecdc4;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        
        .celebration h2 {
            font-size: 4rem;
            color: white;
            margin-bottom: 20px;
            text-shadow: 3px 3px 0 #ff9966;
        }
        
        .celebration p {
            font-size: 2rem;
            color: #ffffcc;
            margin-bottom: 30px;
        }
        
        .help-box {
            background: #e8f5e9;
            padding: 25px;
            border-radius: 20px;
            border: 5px solid #66bb6a;
            margin-top: 20px;
        }
        
        .help-title {
            color: #2e7d32;
            margin-bottom: 15px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .system-help {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .help-item {
            background: white;
            padding: 10px;
            border-radius: 10px;
            border: 3px solid;
            text-align: left;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .bounce {
            animation: bounce 0.5s;
        }
        
        .system-box.drag-over {
            background: #f0f7ff;
            border-style: dashed;
        }
        
        .part-emoji {
            font-size: 1.8rem;
        }
        
        @media (max-width: 768px) {
            .systems-container {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 100%;
                justify-content: center;
            }
            
            .system-help {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1><i class="fas fa-user-md"></i> Sort the Body Parts</h1>
        <p class="subtitle">Drag body parts to their correct systems!</p>
        
        <div class="game-area">
            <div class="instruction-box" id="instruction">
                Drag each body part to the correct body system!
            </div>
            
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-value" id="score">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="remaining">8</div>
                    <div class="stat-label">Remaining</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="level">1</div>
                    <div class="stat-label">Level</div>
                </div>
            </div>
            
            <div class="systems-container">
                <div class="system-box" id="skeletal-system" data-system="skeletal">
                    <div class="system-title" style="background: #78909c; border-color: #546e7a;">
                        ü¶¥ Skeletal System
                    </div>
                    <div class="system-body-parts" id="skeletal-parts">
                        <!-- Body parts will be dragged here -->
                    </div>
                </div>
                
                <div class="system-box" id="muscular-system" data-system="muscular">
                    <div class="system-title" style="background: #ef5350; border-color: #d32f2f;">
                        üí™ Muscular System
                    </div>
                    <div class="system-body-parts" id="muscular-parts">
                        <!-- Body parts will be dragged here -->
                    </div>
                </div>
                
                <div class="system-box" id="digestive-system" data-system="digestive">
                    <div class="system-title" style="background: #66bb6a; border-color: #388e3c;">
                        üçé Digestive System
                    </div>
                    <div class="system-body-parts" id="digestive-parts">
                        <!-- Body parts will be dragged here -->
                    </div>
                </div>
                
                <div class="system-box" id="respiratory-system" data-system="respiratory">
                    <div class="system-title" style="background: #42a5f5; border-color: #1976d2;">
                        ü´Å Respiratory System
                    </div>
                    <div class="system-body-parts" id="respiratory-parts">
                        <!-- Body parts will be dragged here -->
                    </div>
                </div>
            </div>
            
            <div class="body-parts-container">
                <div class="parts-title">Drag these body parts:</div>
                <div class="parts-grid" id="parts-grid">
                    <!-- Body parts will be added here -->
                </div>
            </div>
            
            <div class="controls">
                <button id="start-btn">
                    <i class="fas fa-play"></i> Start Game
                </button>
                <button id="check-btn" disabled>
                    <i class="fas fa-check-circle"></i> Check Answers
                </button>
                <button id="reset-btn">
                    <i class="fas fa-redo"></i> Reset Game
                </button>
            </div>
        </div>
        
        <div class="help-box">
            <div class="help-title">
                <i class="fas fa-lightbulb"></i> Body Systems Guide
            </div>
            <div class="system-help">
                <div class="help-item" style="border-color: #78909c;">
                    <strong>ü¶¥ Skeletal System:</strong> Bones that support your body
                </div>
                <div class="help-item" style="border-color: #ef5350;">
                    <strong>üí™ Muscular System:</strong> Muscles that help you move
                </div>
                <div class="help-item" style="border-color: #66bb6a;">
                    <strong>üçé Digestive System:</strong> Parts that digest food
                </div>
                <div class="help-item" style="border-color: #42a5f5;">
                    <strong>ü´Å Respiratory System:</strong> Parts that help you breathe
                </div>
            </div>
        </div>
    </div>
    
    <div class="celebration" id="celebration">
        <div class="celebration-content">
            <h2>üéâ EXCELLENT! üéâ</h2>
            <p id="final-score">You sorted all body parts!</p>
            <button id="next-level-btn">
                <i class="fas fa-arrow-right"></i> Next Level
            </button>
        </div>
    </div>

    <script>
        // Body parts data organized by systems
        const bodyParts = {
            level1: {
                skeletal: ["ü¶¥ Skull", "ü¶¥ Ribs", "ü¶¥ Spine"],
                muscular: ["üí™ Biceps", "üí™ Triceps", "üí™ Heart Muscle"],
                digestive: ["üçé Stomach", "üçé Intestines", "üçé Liver"],
                respiratory: ["ü´Å Lungs", "ü´Å Nose", "ü´Å Windpipe"]
            },
            level2: {
                skeletal: ["ü¶¥ Femur", "ü¶¥ Pelvis", "ü¶¥ Humerus", "ü¶¥ Scapula"],
                muscular: ["üí™ Quadriceps", "üí™ Hamstrings", "üí™ Calves", "üí™ Abdominals"],
                digestive: ["üçé Esophagus", "üçé Pancreas", "üçé Gallbladder", "üçé Mouth"],
                respiratory: ["ü´Å Bronchi", "ü´Å Diaphragm", "ü´Å Trachea", "ü´Å Alveoli"]
            }
        };

        // Game state
        const gameState = {
            score: 0,
            remaining: 8,
            level: 1,
            gameActive: false,
            draggedPart: null,
            placedParts: {
                skeletal: [],
                muscular: [],
                digestive: [],
                respiratory: []
            }
        };

        // Initialize game
        function initGame() {
            setupEventListeners();
            createBodyParts();
            updateDisplay();
        }

        // Create body parts for dragging
        function createBodyParts() {
            const partsGrid = document.getElementById('parts-grid');
            partsGrid.innerHTML = '';
            
            const currentLevel = gameState.level === 1 ? 'level1' : 'level2';
            const allParts = [];
            
            // Collect all parts from all systems
            Object.values(bodyParts[currentLevel]).forEach(systemParts => {
                allParts.push(...systemParts);
            });
            
            // Shuffle the parts
            const shuffledParts = shuffleArray([...allParts]);
            
            // Create draggable part elements
            shuffledParts.forEach(part => {
                const partElement = document.createElement('div');
                partElement.className = 'body-part';
                partElement.draggable = true;
                partElement.textContent = part;
                
                // Store the original part text to identify which system it belongs to
                partElement.dataset.part = part;
                
                // Add drag events
                partElement.addEventListener('dragstart', handleDragStart);
                partElement.addEventListener('dragend', handleDragEnd);
                
                partsGrid.appendChild(partElement);
            });
            
            // Clear placed parts
            gameState.placedParts = {
                skeletal: [],
                muscular: [],
                digestive: [],
                respiratory: []
            };
            
            // Clear system boxes
            document.querySelectorAll('.system-body-parts').forEach(box => {
                box.innerHTML = '';
            });
            
            gameState.remaining = shuffledParts.length;
        }

        // Shuffle array function
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Handle drag start
        function handleDragStart(e) {
            if (!gameState.gameActive) return;
            
            this.classList.add('dragging');
            gameState.draggedPart = {
                element: this,
                part: this.dataset.part
            };
            e.dataTransfer.setData('text/plain', this.dataset.part);
        }

        // Handle drag end
        function handleDragEnd() {
            this.classList.remove('dragging');
            gameState.draggedPart = null;
        }

        // Setup drag and drop events
        function setupEventListeners() {
            const systemBoxes = document.querySelectorAll('.system-box');
            
            systemBoxes.forEach(box => {
                box.addEventListener('dragover', handleDragOver);
                box.addEventListener('dragenter', handleDragEnter);
                box.addEventListener('dragleave', handleDragLeave);
                box.addEventListener('drop', handleDrop);
            });
            
            document.getElementById('start-btn').addEventListener('click', startGame);
            document.getElementById('check-btn').addEventListener('click', checkAnswers);
            document.getElementById('reset-btn').addEventListener('click', resetGame);
            document.getElementById('next-level-btn').addEventListener('click', nextLevel);
        }

        // Drag over event
        function handleDragOver(e) {
            if (!gameState.gameActive) return;
            e.preventDefault();
        }

        // Drag enter event
        function handleDragEnter(e) {
            if (!gameState.gameActive) return;
            e.preventDefault();
            this.classList.add('drag-over');
        }

        // Drag leave event
        function handleDragLeave() {
            this.classList.remove('drag-over');
        }

        // Drop event
        function handleDrop(e) {
            if (!gameState.gameActive || !gameState.draggedPart) return;
            
            e.preventDefault();
            this.classList.remove('drag-over');
            
            const system = this.dataset.system;
            const draggedPart = gameState.draggedPart;
            
            // Remove from original location if it was already placed
            if (draggedPart.element.parentElement.classList.contains('system-body-parts')) {
                const oldSystem = draggedPart.element.closest('.system-box').dataset.system;
                const index = gameState.placedParts[oldSystem].indexOf(draggedPart.part);
                if (index > -1) {
                    gameState.placedParts[oldSystem].splice(index, 1);
                }
            }
            
            // Add to new system
            gameState.placedParts[system].push(draggedPart.part);
            
            // Move the element
            const partsContainer = this.querySelector('.system-body-parts');
            draggedPart.element.classList.remove('dragging');
            partsContainer.appendChild(draggedPart.element);
            
            // Remove any incorrect/incorrect classes
            draggedPart.element.classList.remove('correct', 'incorrect');
            
            // Update remaining count
            updateRemainingCount();
            
            document.getElementById('instruction').textContent = `Good! Now drag more body parts to their systems.`;
        }

        // Start the game
        function startGame() {
            if (gameState.gameActive) return;
            
            gameState.gameActive = true;
            gameState.score = 0;
            gameState.remaining = 8;
            
            createBodyParts();
            
            document.getElementById('start-btn').disabled = true;
            document.getElementById('check-btn').disabled = false;
            document.getElementById('instruction').textContent = "Drag body parts to their correct systems!";
            
            updateDisplay();
        }

        // Check answers
        function checkAnswers() {
            if (!gameState.gameActive) return;
            
            let correctCount = 0;
            const currentLevel = gameState.level === 1 ? 'level1' : 'level2';
            
            // Check each system
            Object.keys(bodyParts[currentLevel]).forEach(system => {
                const correctParts = bodyParts[currentLevel][system];
                const placedParts = gameState.placedParts[system];
                
                // Check each placed part in this system
                placedParts.forEach(part => {
                    const partElement = Array.from(document.querySelectorAll('.body-part'))
                        .find(el => el.dataset.part === part);
                    
                    if (partElement) {
                        if (correctParts.includes(part)) {
                            // Correct placement
                            partElement.classList.remove('incorrect');
                            partElement.classList.add('correct');
                            correctCount++;
                        } else {
                            // Incorrect placement
                            partElement.classList.remove('correct');
                            partElement.classList.add('incorrect');
                        }
                    }
                });
            });
            
            gameState.score = correctCount;
            
            // Update instruction based on performance
            if (correctCount === gameState.remaining) {
                document.getElementById('instruction').innerHTML = `<span style="color:#4caf50; font-weight:bold;">üéâ PERFECT! All ${correctCount} body parts are in the right place!</span>`;
                
                // Show celebration after delay
                setTimeout(() => {
                    showCelebration();
                }, 1000);
            } else if (correctCount >= gameState.remaining / 2) {
                document.getElementById('instruction').innerHTML = `<span style="color:#ff9800;">Good job! ${correctCount} out of ${gameState.remaining} are correct. Keep going!</span>`;
            } else {
                document.getElementById('instruction').innerHTML = `<span style="color:#f44336;">You have ${correctCount} correct. Look at the guide and try again!</span>`;
            }
            
            updateDisplay();
        }

        // Reset the game
        function resetGame() {
            gameState.gameActive = false;
            gameState.score = 0;
            gameState.remaining = 8;
            gameState.level = 1;
            
            document.getElementById('start-btn').disabled = false;
            document.getElementById('check-btn').disabled = true;
            document.getElementById('instruction').textContent = "Click START to begin sorting body parts!";
            
            createBodyParts();
            updateDisplay();
        }

        // Update remaining count
        function updateRemainingCount() {
            const partsGrid = document.getElementById('parts-grid');
            const placedParts = document.querySelectorAll('.system-body-parts .body-part').length;
            const totalParts = document.querySelectorAll('.body-part').length;
            
            gameState.remaining = totalParts - placedParts;
            updateDisplay();
        }

        // Show celebration
        function showCelebration() {
            const celebration = document.getElementById('celebration');
            const finalScore = document.getElementById('final-score');
            
            if (gameState.level === 1) {
                finalScore.textContent = `Level ${gameState.level} Complete! All ${gameState.score} body parts sorted correctly!`;
            } else {
                finalScore.textContent = `You completed both levels! You're a body expert!`;
            }
            
            celebration.style.display = 'flex';
        }

        // Go to next level
        function nextLevel() {
            if (gameState.level < 2) {
                gameState.level++;
                document.getElementById('celebration').style.display = 'none';
                
                // Update level display
                updateDisplay();
                
                // Reset for next level
                gameState.gameActive = true;
                gameState.score = 0;
                
                createBodyParts();
                
                document.getElementById('start-btn').disabled = true;
                document.getElementById('check-btn').disabled = false;
                document.getElementById('instruction').textContent = `Level ${gameState.level}! Drag the new body parts to their systems!`;
                
                updateRemainingCount();
            } else {
                // Game completed
                document.getElementById('celebration').style.display = 'none';
                resetGame();
                alert("Congratulations! You've completed all levels!");
            }
        }

        // Update display
        function updateDisplay() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('remaining').textContent = gameState.remaining;
            document.getElementById('level').textContent = gameState.level;
            
            // Make remaining number bounce when low
            const remainingElement = document.getElementById('remaining');
            if (gameState.remaining <= 3 && gameState.remaining > 0) {
                remainingElement.classList.add('bounce');
            } else {
                remainingElement.classList.remove('bounce');
            }
        }

        // Initialize when page loads
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>