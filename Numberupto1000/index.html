<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Adventure: Numbers Up to 10,000</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }
        
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            margin: 20px 0;
        }
        
        h1 {
            color: #2575fc;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .subtitle {
            text-align: center;
            color: #6a11cb;
            margin-bottom: 30px;
            font-size: 1.2rem;
        }
        
        .game-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .game-btn {
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        .game-btn.active {
            background: linear-gradient(to right, #ff8a00, #ff2070);
        }
        
        .game-btn.completed {
            background: linear-gradient(to right, #4caf50, #2e7d32);
        }
        
        .game-btn.locked {
            background: #cccccc;
            cursor: not-allowed;
        }
        
        .game-area {
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .game-title {
            color: #2575fc;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .place-value-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .place-value-box {
            background: white;
            border-radius: 10px;
            padding: 15px;
            width: 120px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .place-value-label {
            font-weight: bold;
            color: #6a11cb;
            margin-bottom: 10px;
        }
        
        .place-value-number {
            font-size: 2rem;
            color: #2575fc;
            margin-bottom: 10px;
        }
        
        .place-value-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        
        .control-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: none;
            background-color: #2575fc;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .number-display {
            font-size: 3rem;
            color: #6a11cb;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
        }
        
        .comparison-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .number-box {
            background: white;
            border-radius: 10px;
            padding: 20px;
            width: 150px;
            text-align: center;
            font-size: 2.5rem;
            color: #2575fc;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .comparison-symbol {
            font-size: 3rem;
            color: #ff8a00;
            font-weight: bold;
        }
        
        .options-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .option-btn {
            background: white;
            border: 2px solid #2575fc;
            border-radius: 10px;
            padding: 10px 20px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .option-btn:hover {
            background: #e6f0ff;
        }
        
        .option-btn.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }
        
        .option-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        
        .ordering-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 500px;
        }
        
        .ordering-item {
            background: white;
            border: 2px solid #2575fc;
            border-radius: 10px;
            padding: 15px;
            font-size: 1.5rem;
            text-align: center;
            cursor: grab;
            transition: all 0.2s ease;
        }
        
        .ordering-item.dragging {
            opacity: 0.5;
            border: 2px dashed #6a11cb;
        }

        .ordering-item:hover {
            background-color: #e6f0ff;
        }
        
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .feedback.correct {
            background: #e8f5e9;
            color: #4caf50;
        }
        
        .feedback.incorrect {
            background: #ffebee;
            color: #f44336;
        }
        
        .action-btn {
            background: linear-gradient(to right, #ff8a00, #ff2070);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        .score-container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            padding: 5px 10px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        
        .progress-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
            width: 100%;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #4caf50, #2e7d32);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            font-size: 1rem;
            color: white;
            font-weight: bold;
        }
        
        .level-complete {
            text-align: center;
            padding: 20px;
            background: #e8f5e9;
            border-radius: 15px;
            margin-top: 20px;
            display: none;
        }
        
        .level-complete h3 {
            color: #4caf50;
            margin-bottom: 10px;
        }
        
        .level-complete p {
            margin-bottom: 15px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .game-btn {
                padding: 10px 15px;
                font-size: 1rem;
            }
            
            .number-display {
                font-size: 2.5rem;
            }
            
            .number-box {
                font-size: 2rem;
                width: 120px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Math Adventure âž•</h1>
        <div class="subtitle">Numbers Up to 10,000</div>
        
        <div class="score-container">
            <div>Score: <span id="score">0</span></div>
            <div>Time: <span id="timer">00:00</span></div>
            <div>Level: <span id="level">1</span></div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Complete Place Value Explorer to unlock the next game</div>
        </div>
        
        <div class="game-selector">
            <button class="game-btn active" data-game="placeValue">Place Value Explorer</button>
            <button class="game-btn locked" data-game="comparison">Number Comparison</button>
            <button class="game-btn locked" data-game="ordering">Number Ordering</button>
        </div>
        
        <div class="game-area">
            <div id="placeValueGame" class="game-content">
                <h2 class="game-title">Place Value Explorer</h2>
                <div class="place-value-container">
                    <div class="place-value-box">
                        <div class="place-value-label">Thousands</div>
                        <div class="place-value-number" id="thousands">0</div>
                        <div class="place-value-controls">
                            <button class="control-btn" data-place="thousands" data-action="decrease">-</button>
                            <button class="control-btn" data-place="thousands" data-action="increase">+</button>
                        </div>
                    </div>
                    <div class="place-value-box">
                        <div class="place-value-label">Hundreds</div>
                        <div class="place-value-number" id="hundreds">0</div>
                        <div class="place-value-controls">
                            <button class="control-btn" data-place="hundreds" data-action="decrease">-</button>
                            <button class="control-btn" data-place="hundreds" data-action="increase">+</button>
                        </div>
                    </div>
                    <div class="place-value-box">
                        <div class="place-value-label">Tens</div>
                        <div class="place-value-number" id="tens">0</div>
                        <div class="place-value-controls">
                            <button class="control-btn" data-place="tens" data-action="decrease">-</button>
                            <button class="control-btn" data-place="tens" data-action="increase">+</button>
                        </div>
                    </div>
                    <div class="place-value-box">
                        <div class="place-value-label">Ones</div>
                        <div class="place-value-number" id="ones">0</div>
                        <div class="place-value-controls">
                            <button class="control-btn" data-place="ones" data-action="decrease">-</button>
                            <button class="control-btn" data-place="ones" data-action="increase">+</button>
                        </div>
                    </div>
                </div>
                
                <div class="number-display" id="fullNumber">0</div>
                
                <div class="feedback" id="placeValueFeedback">Build the number: <span id="placeValueTarget">0</span></div>
                
                <button class="action-btn" id="checkPlaceValue">New Target Number</button>
                
                <div class="level-complete" id="placeValueComplete">
                    <h3>ðŸŽ‰ Level Complete! ðŸŽ‰</h3>
                    <p>You've mastered Place Value Explorer!</p>
                    <p>You earned <span id="placeValueScore">0</span> points in this level.</p>
                    <button class="action-btn" id="nextLevel1">Continue to Number Comparison</button>
                </div>
            </div>
            
            <div id="comparisonGame" class="game-content" style="display: none;">
                <h2 class="game-title">Number Comparison</h2>
                <div class="comparison-container">
                    <div class="number-box" id="comparisonNumber1">0</div>
                    <div class="comparison-symbol" id="comparisonSymbol">?</div>
                    <div class="number-box" id="comparisonNumber2">0</div>
                </div>
                
                <div class="options-container">
                    <button class="option-btn" data-answer="greater">></button>
                    <button class="option-btn" data-answer="equal">=</button>
                    <button class="option-btn" data-answer="less"><</button>
                </div>
                
                <div class="feedback" id="comparisonFeedback">Choose the correct symbol.</div>
                
                <button class="action-btn" id="nextComparison">Next Question</button>
                
                <div class="level-complete" id="comparisonComplete">
                    <h3>ðŸŽ‰ Level Complete! ðŸŽ‰</h3>
                    <p>You've mastered Number Comparison!</p>
                    <p>You earned <span id="comparisonScore">0</span> points in this level.</p>
                    <button class="action-btn" id="nextLevel2">Continue to Number Ordering</button>
                </div>
            </div>
            
            <div id="orderingGame" class="game-content" style="display: none;">
                <h2 class="game-title">Number Ordering</h2>
                <p>Drag the numbers to arrange them in <span id="orderType">ascending</span> order (smallest to largest)</p>
                
                <div class="ordering-container" id="orderingContainer">
                    </div>
                
                <div class="feedback" id="orderingFeedback">Drag the numbers to arrange them correctly!</div>
                
                <button class="action-btn" id="checkOrdering">Check Order</button>
                
                <div class="level-complete" id="orderingComplete">
                    <h3>ðŸŽ‰ Congratulations! ðŸŽ‰</h3>
                    <p>You've completed all levels of Math Adventure!</p>
                    <p>You earned <span id="orderingScore">0</span> points in this level.</p>
                    <p>Your total score is <span id="totalScore">0</span> points.</p>
                    <button class="action-btn" id="restartGame">Play Again</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let currentGame = 'placeValue';
        let score = 0;
        let level = 1;
        let placeValueTargetNumber = 0;
        let timer = 0;
        let timerInterval;
        let gamesCompleted = {
            placeValue: false,
            comparison: false,
            ordering: false
        };
        let levelScores = {
            placeValue: 0,
            comparison: 0,
            ordering: 0
        };
        let questionsAnswered = {
            placeValue: 0,
            comparison: 0,
            ordering: 0
        };
        const QUESTIONS_PER_LEVEL = 5; // Number of questions to complete each level
        
        // DOM elements
        const gameBtns = document.querySelectorAll('.game-btn');
        const gameContents = document.querySelectorAll('.game-content');
        const scoreElement = document.getElementById('score');
        const levelElement = document.getElementById('level');
        const timerElement = document.getElementById('timer');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        
        // Place Value Game Elements
        const placeValueNumbers = {
            thousands: document.getElementById('thousands'),
            hundreds: document.getElementById('hundreds'),
            tens: document.getElementById('tens'),
            ones: document.getElementById('ones')
        };
        const fullNumberElement = document.getElementById('fullNumber');
        const placeValueFeedback = document.getElementById('placeValueFeedback');
        const placeValueTargetElement = document.getElementById('placeValueTarget');
        const checkPlaceValueBtn = document.getElementById('checkPlaceValue');
        const controlBtns = document.querySelectorAll('.control-btn');
        const placeValueComplete = document.getElementById('placeValueComplete');
        const placeValueScoreElement = document.getElementById('placeValueScore');
        const nextLevel1Btn = document.getElementById('nextLevel1');
        
        // Comparison Game Elements
        const comparisonNumber1 = document.getElementById('comparisonNumber1');
        const comparisonNumber2 = document.getElementById('comparisonNumber2');
        const comparisonSymbol = document.getElementById('comparisonSymbol');
        const comparisonOptions = document.querySelectorAll('#comparisonGame .options-container .option-btn');
        const comparisonFeedback = document.getElementById('comparisonFeedback');
        const nextComparisonBtn = document.getElementById('nextComparison');
        const comparisonComplete = document.getElementById('comparisonComplete');
        const comparisonScoreElement = document.getElementById('comparisonScore');
        const nextLevel2Btn = document.getElementById('nextLevel2');
        
        // Ordering Game Elements
        const orderingContainer = document.getElementById('orderingContainer');
        const orderTypeElement = document.getElementById('orderType');
        const orderingFeedback = document.getElementById('orderingFeedback');
        const checkOrderingBtn = document.getElementById('checkOrdering');
        const orderingComplete = document.getElementById('orderingComplete');
        const orderingScoreElement = document.getElementById('orderingScore');
        const totalScoreElement = document.getElementById('totalScore');
        const restartGameBtn = document.getElementById('restartGame');
        
        // Initialize the game
        function init() {
            // Start the timer
            startTimer();
            
            // Set up game selector buttons
            gameBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const game = btn.getAttribute('data-game');
                    if (!btn.classList.contains('locked')) {
                        switchGame(game);
                        
                        // Update active button
                        gameBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                    }
                });
            });
            
            // Place Value Game
            setupPlaceValueGame();
            
            // Comparison Game
            setupComparisonGame();
            
            // Ordering Game
            setupOrderingGame();
            
            // Level progression buttons
            nextLevel1Btn.addEventListener('click', () => {
                switchGame('comparison');
                unlockGame('comparison');
                updateProgressBar();
            });
            
            nextLevel2Btn.addEventListener('click', () => {
                switchGame('ordering');
                unlockGame('ordering');
                updateProgressBar();
            });
            
            restartGameBtn.addEventListener('click', restartGame);
            
            // Initialize first game
            switchGame('placeValue');
            updateProgressBar();
        }
        
        // Start the game timer
        function startTimer() {
            timerInterval = setInterval(() => {
                timer++;
                updateTimerDisplay();
            }, 1000);
        }
        
        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(timer / 60);
            const seconds = timer % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Switch between games
        function switchGame(game) {
            currentGame = game;
            
            // Hide all game contents
            gameContents.forEach(content => {
                content.style.display = 'none';
            });
            
            // Show selected game
            document.getElementById(`${game}Game`).style.display = 'flex';
            
            // Reset option buttons
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.className = 'option-btn';
                btn.disabled = false;
            });
            
            // Generate new question for current game
            if (game === 'placeValue') {
                generatePlaceValueTarget();
            } else if (game === 'comparison') {
                generateComparisonQuestion();
            } else if (game === 'ordering') {
                generateOrderingQuestion();
            }
        }
        
        // Unlock a game
        function unlockGame(game) {
            gamesCompleted[game] = true;
            const gameBtn = document.querySelector(`.game-btn[data-game="${game}"]`);
            gameBtn.classList.remove('locked');
            gameBtn.classList.add('completed');
        }
        
        // Update progress bar
        function updateProgressBar() {
            let progress = 0;
            let text = "";
            
            if (!gamesCompleted.placeValue) {
                progress = (questionsAnswered.placeValue / QUESTIONS_PER_LEVEL) * 33;
                text = `Complete Place Value Explorer: ${questionsAnswered.placeValue}/${QUESTIONS_PER_LEVEL}`;
            } else if (!gamesCompleted.comparison) {
                progress = 33 + (questionsAnswered.comparison / QUESTIONS_PER_LEVEL) * 33;
                text = `Complete Number Comparison: ${questionsAnswered.comparison}/${QUESTIONS_PER_LEVEL}`;
            } else if (!gamesCompleted.ordering) {
                progress = 66 + (questionsAnswered.ordering / QUESTIONS_PER_LEVEL) * 34;
                text = `Complete Number Ordering: ${questionsAnswered.ordering}/${QUESTIONS_PER_LEVEL}`;
            } else {
                progress = 100;
                text = "All levels completed!";
            }
            
            progressFill.style.width = `${progress}%`;
            progressText.textContent = text;
        }
        
        // --- Place Value Game Functions ---
        function setupPlaceValueGame() {
            // Set up control buttons
            controlBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const place = btn.getAttribute('data-place');
                    const action = btn.getAttribute('data-action');
                    
                    let currentValue = parseInt(placeValueNumbers[place].textContent);
                    
                    if (action === 'increase') {
                        if (currentValue < 9) {
                            currentValue++;
                        } else {
                            currentValue = 0;
                        }
                    } else {
                        if (currentValue > 0) {
                            currentValue--;
                        } else {
                            currentValue = 9;
                        }
                    }
                    
                    placeValueNumbers[place].textContent = currentValue;
                    updateFullNumber();
                    checkPlaceValue();
                });
            });

            checkPlaceValueBtn.addEventListener('click', generatePlaceValueTarget);
            
            generatePlaceValueTarget();
        }

        function generatePlaceValueTarget() {
            // Generate a random target number based on level
            const maxNumber = Math.min(1000 + level * 1000, 10000);
            placeValueTargetNumber = Math.floor(Math.random() * maxNumber) + 1;
            
            placeValueTargetElement.textContent = placeValueTargetNumber.toLocaleString();
            placeValueFeedback.textContent = `Build the number: ${placeValueTargetNumber.toLocaleString()}`;
            placeValueFeedback.className = 'feedback';

            // Reset current number to 0
            placeValueNumbers.thousands.textContent = '0';
            placeValueNumbers.hundreds.textContent = '0';
            placeValueNumbers.tens.textContent = '0';
            placeValueNumbers.ones.textContent = '0';
            updateFullNumber();
        }
        
        function updateFullNumber() {
            const thousands = parseInt(placeValueNumbers.thousands.textContent);
            const hundreds = parseInt(placeValueNumbers.hundreds.textContent);
            const tens = parseInt(placeValueNumbers.tens.textContent);
            const ones = parseInt(placeValueNumbers.ones.textContent);
            
            const fullNumber = thousands * 1000 + hundreds * 100 + tens * 10 + ones;
            fullNumberElement.textContent = fullNumber.toLocaleString();
        }
        
        function checkPlaceValue() {
            const fullNumber = parseInt(fullNumberElement.textContent.replace(/,/g, ''));
            
            let message = '';
            let isCorrect = false;
            
            if (fullNumber === placeValueTargetNumber) {
                message = `Perfect! You built ${fullNumber.toLocaleString()}, which is exactly the target!`;
                isCorrect = true;
                updateScore(10);
                questionsAnswered.placeValue++;
                updateProgressBar();
                
                // Check if level is complete
                if (questionsAnswered.placeValue >= QUESTIONS_PER_LEVEL) {
                    levelScores.placeValue = score;
                    placeValueScoreElement.textContent = levelScores.placeValue;
                    placeValueComplete.style.display = 'block';
                } else {
                    setTimeout(generatePlaceValueTarget, 1500);
                }
            } else if (fullNumber > 0 && Math.abs(fullNumber - placeValueTargetNumber) <= 100) {
                message = `Close! Your number is ${fullNumber.toLocaleString()}. Keep trying to reach ${placeValueTargetNumber.toLocaleString()}!`;
            } else if (fullNumber > 0) {
                 message = `Not quite. Your number is ${fullNumber.toLocaleString()}. Keep building!`;
            } else {
                 message = `Build the number: ${placeValueTargetNumber.toLocaleString()}`;
            }
            
            placeValueFeedback.textContent = message;
            placeValueFeedback.className = isCorrect ? 'feedback correct' : 'feedback incorrect';
        }
        
        // --- Comparison Game Functions ---
        function setupComparisonGame() {
            // Set up option buttons
            comparisonOptions.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // Disable all buttons to prevent multiple clicks
                    comparisonOptions.forEach(b => b.disabled = true);
                    checkComparisonAnswer(e.target.getAttribute('data-answer'));
                });
            });
            
            // Set up next button
            nextComparisonBtn.addEventListener('click', generateComparisonQuestion);
        }
        
        function generateComparisonQuestion() {
            // Enable option buttons for new question
            comparisonOptions.forEach(btn => {
                btn.disabled = false;
            });

            // Reset feedback and options
            comparisonFeedback.textContent = 'Choose the correct symbol.';
            comparisonFeedback.className = 'feedback';
            comparisonOptions.forEach(btn => {
                btn.className = 'option-btn';
            });
            comparisonSymbol.textContent = '?';
            
            // Generate two random numbers based on level
            const maxNumber = Math.min(1000 + level * 1000, 10000);
            let num1 = Math.floor(Math.random() * maxNumber) + 1;
            let num2 = Math.floor(Math.random() * maxNumber) + 1;
            
            // Ensure they're different about 80% of the time
            if (Math.random() > 0.2) {
                while (num1 === num2) {
                    num2 = Math.floor(Math.random() * maxNumber) + 1;
                }
            }
            
            comparisonNumber1.textContent = num1.toLocaleString();
            comparisonNumber2.textContent = num2.toLocaleString();
            
            // Store the correct answer
            let correctAnswer;
            if (num1 > num2) {
                correctAnswer = 'greater';
            } else if (num1 < num2) {
                correctAnswer = 'less';
            } else {
                correctAnswer = 'equal';
            }
            
            comparisonSymbol.setAttribute('data-correct', correctAnswer);
        }
        
        function checkComparisonAnswer(answer) {
            const correctAnswer = comparisonSymbol.getAttribute('data-correct');
            let symbol = '';

            // Update option button colors and get the correct symbol
            comparisonOptions.forEach(btn => {
                if (btn.getAttribute('data-answer') === correctAnswer) {
                    btn.classList.add('correct');
                    symbol = btn.textContent;
                }
                
                if (btn.getAttribute('data-answer') === answer && answer !== correctAnswer) {
                    btn.classList.add('incorrect');
                }
            });

            // Update the central symbol
            comparisonSymbol.textContent = symbol;
            
            if (answer === correctAnswer) {
                comparisonFeedback.textContent = 'Correct! Well done!';
                comparisonFeedback.className = 'feedback correct';
                updateScore(15);
                questionsAnswered.comparison++;
                updateProgressBar();
                
                // Check if level is complete
                if (questionsAnswered.comparison >= QUESTIONS_PER_LEVEL) {
                    levelScores.comparison = score - levelScores.placeValue;
                    comparisonScoreElement.textContent = levelScores.comparison;
                    comparisonComplete.style.display = 'block';
                } else {
                    setTimeout(generateComparisonQuestion, 1500);
                }
            } else {
                comparisonFeedback.textContent = `Not quite. The correct answer is ${symbol}.`;
                comparisonFeedback.className = 'feedback incorrect';
                setTimeout(generateComparisonQuestion, 1500);
            }
        }
        
        // --- Ordering Game Functions ---
        function setupOrderingGame() {
            // Set up check button
            checkOrderingBtn.addEventListener('click', checkOrdering);
            
            // Must re-attach drag listeners after generating questions
            orderingContainer.addEventListener('dragstart', function(e) {
                if (e.target.classList.contains('ordering-item')) {
                    handleDragStart.call(e.target, e);
                }
            });

            orderingContainer.addEventListener('dragover', function(e) {
                if (e.target.classList.contains('ordering-item')) {
                    handleDragOver.call(e.target, e);
                }
            });

            orderingContainer.addEventListener('drop', function(e) {
                if (e.target.classList.contains('ordering-item')) {
                    handleDrop.call(e.target, e);
                }
            });

            orderingContainer.addEventListener('dragend', function(e) {
                if (e.target.classList.contains('ordering-item')) {
                    handleDragEnd.call(e.target, e);
                }
            });
        }
        
        function generateOrderingQuestion() {
            // Clear container
            orderingContainer.innerHTML = '';
            
            // Determine order type (ascending or descending)
            const isAscending = Math.random() > 0.5;
            orderTypeElement.textContent = isAscending ? 'ascending' : 'descending';
            orderingContainer.setAttribute('data-order', isAscending ? 'ascending' : 'descending');
            
            // Generate random numbers based on level
            const maxNumber = Math.min(1000 + level * 1000, 10000);
            const numbers = [];
            
            // Ensure 5 distinct numbers
            while (numbers.length < 5) {
                let num = Math.floor(Math.random() * (maxNumber - 100)) + 100;
                if (!numbers.includes(num)) {
                     numbers.push(num);
                }
            }

            // Sort numbers and store correct order
            const correctOrder = [...numbers].sort((a, b) => isAscending ? a - b : b - a);
            orderingContainer.setAttribute('data-correct', correctOrder.join(','));
            
            // Shuffle numbers for display
            shuffleArray(numbers);
            
            // Create draggable elements
            numbers.forEach(num => {
                const div = document.createElement('div');
                div.className = 'ordering-item';
                div.textContent = num.toLocaleString();
                div.setAttribute('draggable', 'true');
                div.setAttribute('data-value', num);
                
                orderingContainer.appendChild(div);
            });
            
            // Reset feedback
            orderingFeedback.textContent = `Drag the numbers to arrange them in ${isAscending ? 'ascending' : 'descending'} order!`;
            orderingFeedback.className = 'feedback';
        }
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // Drag and drop functions for ordering game
        let draggedItem = null;
        
        function handleDragStart(e) {
            draggedItem = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', this.getAttribute('data-value')); 
        }
        
        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }
        
        function handleDrop(e) {
            e.preventDefault();
            if (draggedItem !== this && draggedItem) {
                const rect = this.getBoundingClientRect();
                const offsetY = e.clientY - rect.top;

                if (offsetY < rect.height / 2) {
                    // Drop above
                    orderingContainer.insertBefore(draggedItem, this);
                } else {
                    // Drop below
                    orderingContainer.insertBefore(draggedItem, this.nextSibling);
                }
            }
        }
        
        function handleDragEnd() {
            if (draggedItem) {
                draggedItem.classList.remove('dragging');
                draggedItem = null;
            }
        }
        
        function checkOrdering() {
            const currentOrder = Array.from(orderingContainer.querySelectorAll('.ordering-item'))
                .map(item => parseInt(item.getAttribute('data-value')));
            
            const correctOrder = orderingContainer.getAttribute('data-correct')
                .split(',')
                .map(num => parseInt(num));
            
            const isCorrect = JSON.stringify(currentOrder) === JSON.stringify(correctOrder);
            
            if (isCorrect) {
                orderingFeedback.textContent = 'Perfect! The numbers are in the correct order!';
                orderingFeedback.className = 'feedback correct';
                updateScore(20);
                questionsAnswered.ordering++;
                updateProgressBar();
                
                // Check if level is complete
                if (questionsAnswered.ordering >= QUESTIONS_PER_LEVEL) {
                    levelScores.ordering = score - levelScores.placeValue - levelScores.comparison;
                    orderingScoreElement.textContent = levelScores.ordering;
                    totalScoreElement.textContent = score;
                    orderingComplete.style.display = 'block';
                } else {
                    setTimeout(generateOrderingQuestion, 1500);
                }
            } else {
                orderingFeedback.textContent = 'Not quite. Try again! Check if it should be ascending or descending.';
                orderingFeedback.className = 'feedback incorrect';
            }
        }
        
        // --- Score and level management ---
        function updateScore(points) {
            score += points;
            scoreElement.textContent = score;
            
            // Level up every 100 points
            const newLevel = Math.floor(score / 100) + 1;
            if (newLevel > level) {
                level = newLevel;
                levelElement.textContent = level;
                
                // Show level up message
                const feedback = document.querySelector(`#${currentGame}Game .feedback`);
                feedback.textContent += ` ðŸŒŸ Level up! You're now at level ${level}!`;
            }
        }
        
        // Restart the game
        function restartGame() {
            // Reset game state
            score = 0;
            level = 1;
            timer = 0;
            
            gamesCompleted = {
                placeValue: false,
                comparison: false,
                ordering: false
            };
            
            levelScores = {
                placeValue: 0,
                comparison: 0,
                ordering: 0
            };
            
            questionsAnswered = {
                placeValue: 0,
                comparison: 0,
                ordering: 0
            };
            
            // Reset UI
            scoreElement.textContent = score;
            levelElement.textContent = level;
            updateTimerDisplay();
            
            // Reset game buttons
            gameBtns.forEach(btn => {
                if (btn.getAttribute('data-game') === 'placeValue') {
                    btn.classList.remove('locked', 'completed');
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active', 'completed');
                    btn.classList.add('locked');
                }
            });
            
            // Hide completion screens
            placeValueComplete.style.display = 'none';
            comparisonComplete.style.display = 'none';
            orderingComplete.style.display = 'none';
            
            // Reset progress bar
            updateProgressBar();
            
            // Switch to first game
            switchGame('placeValue');
        }
        
        // Initialize the game when the page loads
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>