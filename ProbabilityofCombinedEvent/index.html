<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Probability Pantry: Combined Events</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4ece1; text-align: center; color: #5d4037; }
        #game-container { max-width: 600px; margin: 20px auto; background: white; padding: 20px; border-radius: 15px; border: 4px solid #8d6e63; }
        .pantry-box { display: inline-block; width: 45%; border: 2px dashed #a1887f; padding: 10px; margin: 5px; border-radius: 10px; }
        .item { font-size: 24px; margin: 5px; display: inline-block; }
        #target-order { background: #fff9c4; padding: 15px; border-radius: 10px; font-weight: bold; font-size: 1.2rem; margin-bottom: 20px; }
        button { background-color: #4caf50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1rem; }
        button:hover { background-color: #45a049; }
        input { width: 60px; padding: 8px; font-size: 1rem; text-align: center; }
        #feedback { margin-top: 15px; font-weight: bold; }
        .score { font-size: 1.1rem; color: #2e7d32; }
    </style>
</head>
<body>

    <h1>üç≥ Probability Pantry</h1>
    <p>Form 4 Mathematics: Combined Events</p>

    <div id="game-container">
        <div id="target-order">
            Loading your first order...
        </div>

        <div class="pantry-box">
            <p><strong>Container A (Rice)</strong></p>
            <div id="box-a"></div>
        </div>

        <div class="pantry-box">
            <p><strong>Container B (Protein)</strong></p>
            <div id="box-b"></div>
        </div>

        <div style="margin-top: 20px;">
            <p>What is the probability of picking the items above? (as a fraction)</p>
            <input type="number" id="num" placeholder="Num"> / <input type="number" id="den" placeholder="Den">
            <br><br>
            <button onclick="checkAnswer()">Serve Order!</button>
        </div>

        <div id="feedback"></div>
        <p class="score">Orders Completed: <span id="score-val">0</span></p>
    </div>

    <script>
        let score = 0;
        let currentProb = { num: 0, den: 0 };
        const riceTypes = ['üçö', 'üîµ', 'ü••']; // White, Blue, Coconut
        const proteinTypes = ['üçó', 'üêü', 'üç§', 'ü•©']; // Chicken, Fish, Prawn, Meat

        function generateLevel() {
            const boxA = [];
            const boxB = [];
            const sizeA = Math.floor(Math.random() * 3) + 3;
            const sizeB = Math.floor(Math.random() * 3) + 3;

            // Fill Box A
            for(let i=0; i<sizeA; i++) boxA.push(riceTypes[Math.floor(Math.random() * riceTypes.length)]);
            // Fill Box B
            for(let i=0; i<sizeB; i++) boxB.push(proteinTypes[Math.floor(Math.random() * proteinTypes.length)]);

            document.getElementById('box-a').innerHTML = boxA.join(' ');
            document.getElementById('box-b').innerHTML = boxB.join(' ');

            // Pick a target
            const targetA = boxA[Math.floor(Math.random() * boxA.length)];
            const targetB = boxB[Math.floor(Math.random() * boxB.length)];

            document.getElementById('target-order').innerHTML = `Customer wants: ${targetA} and ${targetB}`;

            // Calculate Probability P(A and B) = P(A) x P(B)
            const countA = boxA.filter(x => x === targetA).length;
            const countB = boxB.filter(x => x === targetB).length;
            
            currentProb.num = countA * countB;
            currentProb.den = sizeA * sizeB;

            document.getElementById('feedback').innerText = "";
            document.getElementById('num').value = "";
            document.getElementById('den').value = "";
        }

        function checkAnswer() {
            const userNum = parseInt(document.getElementById('num').value);
            const userDen = parseInt(document.getElementById('den').value);

            // Check if fraction is equivalent to target
            if (userNum / userDen === currentProb.num / currentProb.den) {
                score++;
                document.getElementById('score-val').innerText = score;
                document.getElementById('feedback').innerHTML = "‚úÖ Delicious! Correct Probability.";
                document.getElementById('feedback').style.color = "green";
                setTimeout(generateLevel, 1500);
            } else {
                document.getElementById('feedback').innerHTML = `‚ùå Wrong Recipe! P(${currentProb.num}/${currentProb.den})`;
                document.getElementById('feedback').style.color = "red";
            }
        }

        generateLevel();
    </script>
</body>
</html>